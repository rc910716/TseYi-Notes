## Task02 OpenVINO 异构系统编程、视频加速处理

### 1 第 2 课：异构系统编程

- 加速器的故事：1985 年能购买到 386 处理器，通过软件进行运算，速度会比较慢，在当时也可以购买 i387DX 处理器，作为外部加速器，提供了主处理器的额外运算能力，可以看作是 Intel 早期分布式算力系统的缩影；大约 4 年后，i387DX 处理器被集成至 CPU 中，但是仍有一部分加速单元是独立的，必须在 CPU 的协同下工作，
- 不同设备的对比：
  1. CPU：可以运行的应用最广泛，具有最灵活的模型编辑，支持多种编程语言，具有需要调试和分析工具，但在 3D 渲染方面，不如专门的 GPU
  2. GPU：执行 3D 渲染任务的速度更快更高效，不如 CPU 可运行的应用广泛，支持 GPU 的调试和分析工具相对较少
  3. VPU：特定领域的加速器，在功率更低的设备中执行更高效的任务
  4. FPGA：混合性解决方案，具有可编程，可像专用硬件一样，进行硬件加速
- 硬件加速器：专用于加速特定任务，加速器通常由 CPU 控制，CPU 向加速器发送数据和运行指令，等待返回结果；期间会产生拷贝开销，数据传输成本较高
- 异构系统编程：
  1. 了解设备能力，可以使用评估工具，对设备进行评测
  2. 利用所有的系统资源，并平衡系统中的计算资源
  3. 考虑数据传输成本
- 异构编程原理：使用 IR 文件（与设备无关），通过推理引擎在不同设备上进行模型推理，提供灵活的插件架构，包括 CPU 插件（MKL-DNN）、GPU 插件（cl-DNN）、MYRIAD 插件（myriad）、FPGA 插件（DLIA），也可以使用 MULTI 插件，在运行推理时，推理引擎会查看每个设备的利用率，根据该指标，决定模型在哪个设备上运行

### 2 第 3 课：AI 应用中的视频加速处理

- 异构计算：目标是发挥系统的最大性能，提供最高的 FPS、最快的响应速度、压缩尽可能多的待处理视频。
  1. 了解不同设备的任务负载情况，根据需求设计更高效的异构系统
  2. 最大程度减少速度传输：在 Intel 集成显卡中压缩视频，并给 CPU 返回已压缩的视频数据，将数据交给 VPU 进行推理
  3. 所有设备保持同步

- 第 6 代 CPU 的布局架构：GT2 包括 24 个 EU，GT3 包括 48 个 EU，GT4 包括 72 个 EU
- 其他功能：
  1. VDBox：提供 BitStreamer 的加速视频编解码
  2. VEBox：提供视频增强和帧处理操作的硬件加速
- Intel Media-SDK：提供 C++/Python API、Gstreamer 和 OpenCV，加速视频编解码，提供视频处理，比如重新调整大小、转换等
- oneVPL（视频处理库）：逐步替代 Media-SDK，不仅支持 Intel CPU 和 GPU，并支持独立 GPU 和其他平台
